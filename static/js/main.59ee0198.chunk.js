(this["webpackJsonpreact_phone-catalog"]=this["webpackJsonpreact_phone-catalog"]||[]).push([[0],{30:function(e,t,c){},33:function(e,t,c){"use strict";c.r(t);var a=c(7),s=c(25),n=c.n(s),r=c(1),o=c(3),i=c(4),l=(c(30),"/phones"),u="/tablets",d="/accessories",j="/favorites",b="/cart",m="/product",h=c(0),p=function(e){var t=e.count;return Object(h.jsx)("div",{className:"image-link__counter counter",children:Object(h.jsx)("span",{className:"counter__text",children:t})})},O=Object(r.createContext)({expandMenu:function(){},collapseMenu:function(){}}),x=function(e){var t=e.link,c=e.imageSource,s=e.alternativeName,n=e.itemsCount,o=Object(r.useContext)(O).collapseMenu;return Object(h.jsxs)(a.c,{className:"image-link",to:t,onClick:o,children:[Object(h.jsx)("img",{className:"image-link__icon",src:c,alt:s}),-1!==n&&Object(h.jsx)(p,{count:n})]})},v=function(e){var t=e.count,c=void 0===t?-1:t;return Object(h.jsx)(x,{alternativeName:"Cart",imageSource:"img/header/cart.svg",link:b,itemsCount:c})};v.defaultProps={count:-1};var f=function(e){var t=e.count,c=void 0===t?-1:t;return Object(h.jsx)(x,{alternativeName:"Favourites",imageSource:"img/header/favourites.svg",link:j,itemsCount:c})};f.defaultProps={count:-1};var _,g=c(5),N=c.n(g),C=function(e){var t=e.imageExtraClass,c=N()("logo",t);return Object(h.jsx)("img",{src:"img/logo.svg",alt:"Logo",className:c})};C.defaultProps={imageExtraClass:""},function(e){e.phone="phone",e.tablet="tablet",e.accessories="accessory",e.all="all"}(_||(_={}));var y=function(e){var t=e.activeLink,c=Object(r.useContext)(O).collapseMenu,s="nav__link",n=N()(s,{active:t===_.phone}),o=N()(s,{active:t===_.tablet}),i=N()(s,{active:t===_.accessories});return Object(h.jsxs)("nav",{className:"nav",children:[Object(h.jsx)(a.c,{className:"nav__link",to:"/",onClick:c,children:"home"}),Object(h.jsx)(a.c,{className:n,to:l,onClick:c,children:"phones"}),Object(h.jsx)(a.c,{className:o,to:u,onClick:c,children:"tablets"}),Object(h.jsx)(a.c,{className:i,to:d,onClick:c,children:"accessories"})]})};y.defaultProps={activeLink:_.all};var k="query",w="page",P=function(e){var t,c=e.currentPage,s=Object(a.d)(),n=Object(o.a)(s,2),i=n[0],l=n[1],u=Object(r.useRef)(null),d=i.get(k),j="Search in ".concat(c,"..."),b=function(){i.delete(k),l(i)};return Object(r.useEffect)((function(){var e=u.current;null!==e&&(e.value=d||"")}),[d]),Object(h.jsxs)("div",{className:"search",children:[i.get(k)?Object(h.jsx)("button",{onClick:b,type:"button",className:"search__close","data-cy":"searchDelete",children:Object(h.jsx)("img",{src:"img/header/search/close.svg",alt:"Clear search"})}):Object(h.jsx)("label",{className:"search__label",htmlFor:"search",children:Object(h.jsx)("img",{src:"img/header/search/search.svg",alt:"Search"})}),Object(h.jsx)("input",{id:"search",className:"search__input",type:"text",placeholder:j,onChange:function(e){var c=e.target.value;clearTimeout(t),t=+setTimeout((function(){c?(i.set(k,c),null!==i.get(w)&&i.set(w,"1"),l(i)):b()}),1e3)},ref:u})]})};function S(e){return""===e?"":"".concat(e.split("MB")[0]," ","MB")}function E(e){return""===e?"":e.replace(" inches","\u201d")}function F(){return window.innerWidth>1030}var T=function(e){var t=e.hasSearch,c=e.currentPage,a=void 0===c?"":c,s=e.favoritesCount,n=e.cartCount,o=e.hasNav,i=e.hasFavorites,l=e.activeLink,u=Object(r.useContext)(O).expandMenu;return Object(h.jsxs)("header",{id:"header",className:"header",children:[Object(h.jsx)("div",{className:"header__part header__part--left",children:F()?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(C,{imageExtraClass:"header__logo logo"}),o&&Object(h.jsx)(y,{activeLink:l})]}):Object(h.jsx)("button",{className:"header__dropdown-menu",onClick:u,type:"button",children:Object(h.jsx)("img",{src:"img/menu.svg",alt:"menu"})})}),Object(h.jsxs)("div",{className:"header__part",children:[t&&Object(h.jsx)(P,{currentPage:a}),F()&&i&&Object(h.jsx)(f,{count:s}),F()&&Object(h.jsx)(v,{count:n})]})]})};T.defaultProps={favoritesCount:-1,cartCount:-1,currentPage:"",hasNav:!0,hasFavorites:!0,activeLink:_.all};var B=function(e){var t=e.children,c=e.extraClassName,a=N()("title",c);return Object(h.jsx)("h1",{className:a,children:t})};B.defaultProps={extraClassName:""};var M=function(e){var t=e.name,c=e.imagePath,a=e.productsCount,s="".concat(a," models");return Object(h.jsxs)("div",{className:"category",children:[Object(h.jsx)("img",{className:"category__image",src:c,alt:t}),Object(h.jsx)("h3",{className:"category__name",children:t}),Object(h.jsx)("p",{className:"category__count",children:s})]})},I=c(15),A="https://mate-academy.github.io/react_phone-catalog/api/products.json",L=0;function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_.all;return fetch(A).then((function(e){return e.json()})).then((function(t){L=0;var c=t.map((function(e){var t=e.price,c=t*e.discount/100;return Object(I.a)(Object(I.a)({},e),{},{discountedPrice:+(t-c).toFixed(2)})}));return e===_.all?c:c.filter((function(t){return t.type===e}))})).catch((function(){return L<20?(L+=1,q(e)):(L=0,[])}))}function R(e){return e.price*e.discount/100}var D,Q=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),c=t[0],s=t[1];function n(e){return c.filter((function(t){return t.type===e})).length}var i=n(_.phone),l=n(_.tablet),u=n(_.accessories);return Object(r.useEffect)((function(){q().then(s)}),[]),Object(h.jsxs)("div",{className:"home__categories shop-by-category",children:[Object(h.jsx)(B,{children:"Shop by category"}),Object(h.jsxs)("div",{"data-cy":"categoryLinksContainer",className:"shop-by-category__categories",children:[Object(h.jsx)(a.b,{className:"shop-by-category__link",to:"phones",children:Object(h.jsx)(M,{imagePath:"img/home/categories/mobile-phones.png",name:"Mobile phones",productsCount:i})}),Object(h.jsx)(a.b,{className:"shop-by-category__link",to:"tablets",children:Object(h.jsx)(M,{imagePath:"img/home/categories/tablets.png",name:"Tablets",productsCount:l})}),Object(h.jsx)(a.b,{className:"shop-by-category__link",to:"accessories",children:Object(h.jsx)(M,{imagePath:"img/home/categories/accessories.png",name:"Accessories",productsCount:u})})]})]})};!function(e){e.left="left",e.right="right",e.top="up"}(D||(D={}));var $=function(e){var t=e.direction,c=e.buttonExtraClass,a=e.onClick,s=e.disabled,n=e.dataCy,r="img/arrows/arrow-".concat(t).concat(s?"-disabled":"",".svg"),o="Arrow ".concat(t),i=N()("arrow",{"arrow--disabled":s},c);return Object(h.jsx)("button",{className:i,type:"button",onClick:a,disabled:s,"data-cy":n,children:Object(h.jsx)("img",{className:"arrow__img",src:r,alt:o})})};$.defaultProps={buttonExtraClass:"",disabled:!1,dataCy:""};var J,z=function(e){var t=e.src,c=e.alt;return Object(h.jsx)("li",{className:"category-slider-image",children:Object(h.jsx)("img",{className:"category-slider-image__banner",src:t,alt:c})})};!function(e){e[e.phones=0]="phones",e[e.tablets=1]="tablets",e[e.accessories=2]="accessories"}(J||(J={}));var U=function(){var e=Object(r.useState)(0),t=Object(o.a)(e,2),c=t[0],a=t[1],s=["phones","tablets","accessories"].map((function(e){return{src:"img/home/slider/banner-".concat(e,".png"),alt:e}})),n=c===J.tablets,i=c===J.accessories,l=N()("categories-slider__images",{"categories-slider__images--1":n,"categories-slider__images--2":i}),u=N()("categories-slider__bar",{"categories-slider__bar--visible":0===c}),d=N()("categories-slider__bar",{"categories-slider__bar--visible":1===c}),j=N()("categories-slider__bar",{"categories-slider__bar--visible":2===c}),b=function(){var e;e=c===J.accessories?J.phones:c+1,a(e)};return Object(r.useEffect)((function(){var e=setInterval((function(){return b()}),5e3);return function(){return clearInterval(e)}}),[c]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"home__categories-slider categories-slider",children:[Object(h.jsx)($,{direction:D.left,buttonExtraClass:"categories-slider__nav",onClick:function(){var e;e=c===J.phones?J.accessories:c-1,a(e)}}),Object(h.jsx)("div",{className:"categories-slider__content",children:Object(h.jsx)("ul",{className:l,children:s.map((function(e){var t=e.src,c=e.alt;return Object(h.jsx)(z,{alt:c,src:t},c)}))})}),Object(h.jsx)($,{direction:D.right,buttonExtraClass:"categories-slider__nav",onClick:b})]}),Object(h.jsxs)("div",{className:"categories-slider__bars",children:[Object(h.jsx)("div",{className:u}),Object(h.jsx)("div",{className:d}),Object(h.jsx)("div",{className:j})]})]})},W=function(e){var t=e.children,c="$".concat(t);return Object(h.jsx)("h2",{className:"old-price",children:c})},G=c(10);function Y(e){var t=function(){var t=localStorage.getItem(e);return"string"===typeof t?JSON.parse(t):[]},c=Object(r.useState)(t),a=Object(o.a)(c,2),s=a[0],n=a[1],i=s.reduce((function(e,t){return e+t.quantity}),0);return[t,function(t){n(t),localStorage.setItem(e,JSON.stringify(t))},function(e){return s.some((function(t){return"id"in t?t.id===e:t.product.id===e}))},s.length,i]}var H="favorites",K="cart",V=Object(r.createContext)({increment:function(){},decrement:function(){}}),X=function(e){var t=e.children,c=e.buttonClasses,a=e.textClasses,s=e.onClick;return Object(h.jsx)("button",{className:c,type:"button",onClick:s,children:Object(h.jsx)("div",{className:a,children:t})})},Z=function(e){var t=e.product,c=e.areBig,a=Y(K),s=Object(o.a)(a,3),n=s[0],i=s[1],l=s[2],u=Y(H),d=Object(o.a)(u,3),j=d[0],b=d[1],m=d[2],p=Object(r.useContext)(V),O=p.increment,x=p.decrement,v=t.id,f=l(v),_=N()("button",{"button--clicked":f,"button--big":c}),g=N()("button__text",{"button__text--clicked":f}),C=f?"Added to cart":"Add to cart",y=N()("product-buttons__favorites",{"product-buttons__favorites--big":c}),k=m(v)?"img/favorites/heart-selected.svg":"img/favorites/heart.svg";return Object(h.jsxs)("div",{className:"product-buttons",children:[Object(h.jsx)(X,{buttonClasses:_,onClick:function(){if(!l(v)){var e={product:t,quantity:1};i([].concat(Object(G.a)(n()),[e]))}},textClasses:g,children:C}),Object(h.jsx)("button",{className:y,type:"button",onClick:function(){m(v)?(b(Object(G.a)(j().filter((function(e){return"id"in e?e.id!==v:e.product.id!==v})))),x()):(b([].concat(Object(G.a)(j()),[t])),O())},"data-cy":"addToFavorite",children:Object(h.jsx)("img",{className:"product-buttons__heart",src:k,alt:"Add to favorites"})})]})};Z.defaultProps={areBig:!1};var ee=function(e){var t=e.name,c=e.value,a=e.isBig,s=N()("product-spec__name",{"product-spec__name--big":a}),n=N()("product-spec__value",{"product-spec__value--big":a,"product-spec__value--small":!a});return Object(h.jsxs)("div",{className:"product-spec",children:[Object(h.jsx)("div",{className:s,children:t}),Object(h.jsx)("div",{className:n,children:c})]})};ee.defaultProps={isBig:!1};var te,ce=function(e){var t=e.specs,c=e.isBig,a=e.listClasses;return Object(h.jsx)("ul",{className:a,children:t.map((function(e){var t=e.name,a=e.value;if(a)return Object(h.jsx)(ee,{name:t,value:a,isBig:c},t)}))})},ae=function(e){var t=e.product,c=t.imageUrl,s=t.name,n=t.price,r=t.discountedPrice,o=t.screen,i=t.capacity,l=t.ram,u=t.id,d="$".concat(r),j=E(o),b=S(i),p=S(l),O="".concat(m,"/").concat(u),x=[{name:"Screen",value:j},{name:"Capacity",value:b},{name:"Ram",value:p}];return Object(h.jsxs)("li",{className:"product-card",children:[Object(h.jsxs)(a.b,{className:"product-card__link",to:O,children:[Object(h.jsx)("img",{className:"product-card__image",src:c,alt:"Product"}),Object(h.jsx)("p",{className:"product-card__name",children:s}),Object(h.jsxs)("div",{className:"product-card__prices",children:[Object(h.jsx)("h2",{className:"product-card__current-price",children:d}),r<n&&Object(h.jsx)(W,{children:n})]}),Object(h.jsx)(ce,{isBig:!1,listClasses:"product-card__details",specs:x})]}),Object(h.jsx)("div",{className:"product-card__buttons",children:Object(h.jsx)(Z,{product:t})})]})},se=function(e){var t=e.products;return Object(h.jsx)("ul",{"data-cy":"cardsContainer",className:"products-slider__cards",children:t.map((function(e){return Object(h.jsx)(ae,{product:e},e.id)}))})};!function(e){e[e.hotProducts=0]="hotProducts",e[e.newProducts=1]="newProducts",e[e.random=2]="random"}(te||(te={}));var ne=1440,re=1024,oe=700,ie=function(e){var t=e.type,c=e.children,a=e.withoutId,s=void 0===a?"":a,n=Object(r.useState)([]),i=Object(o.a)(n,2),l=i[0],u=i[1],d=Object(r.useState)(0),j=Object(o.a)(d,2),b=j[0],m=j[1],p=4,O=document.documentElement.clientWidth;O<ne&&O>=re?p=3:O<re&&O>=oe?p=2:O<oe&&(p=1);var x=l.slice(b,p+b),v=0===b,f=b+p===l.length,_=N()("products-slider",{"home__products-slider--down":t===te.newProducts,"home__products-slider--up":t===te.hotProducts,"product-details__slider":t===te.random});return Object(r.useEffect)((function(){switch(t){case te.newProducts:return void q().then((function(e){return e.filter((function(e){return 0===e.discount})).sort((function(e,t){return t.price-e.price}))})).then(u);case te.random:return void function(e){return q().then((function(t){for(var c=t.filter((function(t){return t.id!==e})),a=[],s=function(){var e=Math.floor(Math.random()*c.length),t=c[e];a.push(t),c=c.filter((function(e){return e.id!==t.id}))};c.length;)s();return a}))}(s).then(u);case te.hotProducts:default:q().then((function(e){return e.filter((function(e){return e.discount>0})).sort((function(e,t){return R(t)-R(e)}))})).then(u)}}),[s]),Object(h.jsxs)("div",{className:_,children:[Object(h.jsxs)("div",{className:"products-slider__header",children:[Object(h.jsx)(B,{children:c}),Object(h.jsxs)("div",{className:"cardsContainer__arrows",children:[Object(h.jsx)($,{direction:D.left,onClick:function(){b>0&&m(b-1)},disabled:v}),Object(h.jsx)($,{direction:D.right,onClick:function(){b+p<l.length&&m(b+1)},disabled:f})]})]}),Object(h.jsx)(se,{products:x})]})};ie.defaultProps={withoutId:""};var le,ue=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(T,{hasSearch:!1,currentPage:"home"}),Object(h.jsxs)("main",{className:"home",children:[Object(h.jsx)(U,{}),Object(h.jsx)(ie,{type:te.hotProducts,children:"Hot prices"}),Object(h.jsx)(Q,{}),Object(h.jsx)(ie,{type:te.newProducts,children:"Brand new models"})]})]})};!function(e){e.features="dropdown-features",e.pages="dropdown-pages"}(le||(le={}));var de="query",je="page",be="perPage",me="sort",he=function(e){var t=e.path;return Object(h.jsxs)("div",{"data-cy":"breadCrumbs",className:"products__breadcrumbs breadcrumbs",children:[Object(h.jsx)(a.b,{to:"/",children:Object(h.jsx)("img",{className:"breadcrumbs__home",src:"img/home-breadcrumbs.svg",alt:"home"})}),t.map((function(e,c){var s=e.link,n=e.text;return Object(h.jsxs)(r.Fragment,{children:[Object(h.jsx)("img",{className:"breadcrumbs__image",src:"img/arrows/arrow-right-breadcrumbs.svg",alt:"Arrow right"}),c===t.length-1?Object(h.jsx)("p",{className:"breadcrumbs__text",children:n}):Object(h.jsx)(a.b,{to:s||"",children:Object(h.jsx)("span",{className:"breadcrumbs__text breadcrumbs__link",children:n})})]},s+n)}))]})},pe=function(){return Object(h.jsx)(B,{children:"No search products found"})},Oe=function(e){var t=e.countText,c=e.extraClasses,a=N()("products-count",c);return Object(h.jsx)("p",{className:a,children:t})},xe=function(e){var t=e.products;return Object(h.jsx)("ul",{className:"products__list products-list","data-cy":"productList",children:t.map((function(e){return Object(h.jsx)(ae,{product:e},e.id)}))})},ve=function(e){var t,c=e.id,s=e.description,n=e.options,i=Object(r.useState)(!1),l=Object(o.a)(i,2),u=l[0],d=l[1],j=Object(r.useState)(-1),b=Object(o.a)(j,2),m=b[0],p=b[1],O=Object(r.useState)(!1),x=Object(o.a)(O,2),v=x[0],f=x[1],_=Object(r.useState)(!1),g=Object(o.a)(_,2),C=g[0],y=g[1],k=Object(a.d)(),w=Object(o.a)(k,2),P=w[0],S=w[1],E=Object(r.useRef)(null),F=Object(r.useRef)(null),T=Object(r.useRef)(null),B=Object(r.useRef)(null),M=N()("dropdown__select",{"dropdown__select--big":c===le.features,"dropdown__select--small":c===le.pages}),I=N()("dropdown__arrow-icon",{"dropdown__arrow-icon--big":c===le.features,"dropdown__arrow-icon--small":c===le.pages}),A=N()("dropdown__list",{"dropdown__list--big":c===le.features,"dropdown__list--small":c===le.pages}),L="img/arrows/arrow-".concat(u?"up":"down","-dropdown.svg"),q=c===le.features?me:be,R=P.get(q),D=null===(t=n.find((function(e){return e.value===R})))||void 0===t?void 0:t.text,Q=function(){v||d(!u)},$=function(e){d(!1);var t=c===le.features?me:be;P.set(t,e),t===be&&("all"===e?P.delete(je):P.set(je,"1")),S(P)},J=function(){C||(f(!0),d(!1),p(-1),window.setTimeout((function(){return f(!1)}),500))};null===P.get(q)&&(P.set(q,n[0].value),S(P));var z=function(e){y(!0);var t=e.key,a="ArrowUp"===t,s="ArrowDown"===t,r="Enter"===t,o="Escape"===t,i=c===le.pages;if(u&&(a||s||r||o)){switch(e.preventDefault(),m){case 0:var l;if(s)null===(l=F.current)||void 0===l||l.focus(),p((function(e){return e+1}));break;case 1:var d;if(a)null===(d=E.current)||void 0===d||d.focus(),p((function(e){return e-1}));else if(s){var j;null===(j=T.current)||void 0===j||j.focus(),p((function(e){return e+1}))}break;case 2:var b;if(a)null===(b=F.current)||void 0===b||b.focus(),p((function(e){return e-1}));else if(s&&i){var h;null===(h=B.current)||void 0===h||h.focus(),p((function(e){return e+1}))}break;case 3:var O;if(a&&i)null===(O=T.current)||void 0===O||O.focus(),p((function(e){return e-1}))}r&&$(n[m].value),o&&Q()}y(!1)};return Object(r.useEffect)((function(){var e;u&&(p(0),null!==E&&(null===(e=E.current)||void 0===e||e.focus()))}),[u]),Object(r.useEffect)((function(){return window.addEventListener("keydown",z),function(){window.removeEventListener("keydown",z)}}),[u,m]),Object(h.jsxs)("div",{className:"dropdown",children:[Object(h.jsx)("p",{className:"dropdown__title",children:s}),Object(h.jsxs)("button",{className:M,type:"button",onClick:Q,children:[Object(h.jsx)("div",{className:"dropdown__select-content",children:Object(h.jsx)("p",{className:"dropdown__select-text",children:D})}),Object(h.jsx)("img",{className:I,src:L,alt:"Dropdown arrow"})]}),u&&Object(h.jsx)("div",{className:A,children:n.map((function(e,t){var c,a=e.text,s=e.value;switch(t){case 1:c=F;break;case 2:c=T;break;case 3:c=B;break;default:c=E}return Object(h.jsx)("button",{className:"dropdown__option",value:s,type:"button",onMouseDown:function(){return $(s)},ref:c,onBlur:J,children:a},a)}))})]})},fe=function(){return Object(h.jsx)("div",{className:"loader",children:Object(h.jsx)("div",{className:"loader__content"})})},_e=function(e){var t=e.categoryName,c="".concat(t," not found");return Object(h.jsx)(B,{children:c})},ge=function(e){var t=e.pageNumber,c=e.isSelected,a=e.onClick,s=N()("page",{page__active:c});return Object(h.jsx)("button",{type:"button",className:s,onClick:function(){return a(t)},disabled:c,children:t})},Ne=function(e){for(var t=e.total,c=e.perPage,a=e.currentPage,s=void 0===a?1:a,n=e.onPageChange,r=[1],o=2;o<=Math.ceil(t/c);o+=1)r.push(o);return Object(h.jsxs)("div",{className:"products__pagination pagination","data-cy":"pagination",children:[Object(h.jsx)($,{direction:D.left,onClick:function(){return n(s-1)},disabled:1===s,dataCy:"paginationLeft"}),Object(h.jsx)("ul",{className:"pagination__pages",children:r.map((function(e){return Object(h.jsx)("li",{children:Object(h.jsx)(ge,{pageNumber:e,isSelected:e===s,onClick:n})},Date.now()+e)}))}),Object(h.jsx)($,{direction:D.right,onClick:function(){return n(s+1)},disabled:s===r.length,dataCy:"paginationRight"})]})};Ne.defaultProps={currentPage:1};var Ce=function(e){var t,c,s,n,i,l,u=e.categoryType,d=Object(r.useState)(null),j=Object(o.a)(d,2),b=j[0],m=j[1],p=Object(r.useState)(0),O=Object(o.a)(p,2),x=O[0],v=O[1],f=Object(r.useState)(-1),g=Object(o.a)(f,2),C=g[0],y=g[1],k=Object(r.useState)(!1),w=Object(o.a)(k,2),P=w[0],S=w[1],E=Object(a.d)(),F=Object(o.a)(E,2),M=F[0],I=F[1],A=null===(t=M.get(de))||void 0===t?void 0:t.toLowerCase(),L=M.get(me),R=M.get(be),D=+(M.get(je)||1),Q=(null===b||void 0===b?void 0:b.length)||0;switch(u){case _.tablet:c="tablets",s="Tablets",n=q(_.tablet),i="Tablets";break;case _.accessories:c="accesories",s="Accessories",n=q(_.accessories),i="Accessories";break;default:case _.phone:c="phones",s="Phones",n=q(_.phone),i="Mobile phones"}var $=["age","name","price"],J=["all","4","8","16"],z=x>=+J[1],U=[{text:"Newest",value:$[0]},{text:"Alphabetically",value:$[1]},{text:"Cheapest",value:$[2]}],W=N()("products__count",{"products__count--query":A}),Y=J.map((function(e){return{text:e,value:e}}));l=R===J[0]?Q:+(R||Q);var H,K=[{text:s}];H=A?"".concat(x," result").concat(1===x?"":"s"):"".concat(x," model").concat(1===x?"":"s");var V=R!==J[0]&&x>=l&&z,X=null===M.get(je)||Number.isInteger(D)&&D>0&&D<=Math.ceil(x/l),Z=!x&&A||L&&!$.includes(L)||R&&!J.includes(R)||!X;return Object(r.useEffect)((function(){P||(null===M.get(be)&&M.set(be,J[0]),null===M.get(me)&&M.set(me,$[0]),I(M,{replace:!0}),S(!0))}),[]),Object(r.useEffect)((function(){null!==M.get("sort")&&null!==M.get("perPage")&&n.then((function(e){y(e.length);var t=Object(G.a)(e);if(A&&(t=e.filter((function(e){return e.name.toLowerCase().includes(A)}))),v(t.length),t.sort((function(e,t){switch(L){case"price":return e.price-t.price;default:case"name":return e.name.localeCompare(t.name);case"age":return e.age-t.age}})),R&&R!==J[0]){var c=(D-1)*l,a=D*l-1;m(t.filter((function(e,t){return t>=c&&t<=a})))}else m(t)}))}),[A,L,D,R]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(T,{hasSearch:!0,currentPage:c}),null===b?Object(h.jsx)(fe,{}):Object(h.jsxs)("main",{className:"products",children:[!A&&Object(h.jsx)(he,{path:K}),Z||!C?Object(h.jsx)("div",{className:"products__no-results",children:C?Object(h.jsx)(pe,{}):Object(h.jsx)(_e,{categoryName:i})}):Object(h.jsxs)(h.Fragment,{children:[!A&&Object(h.jsx)(B,{extraClassName:"products__title",children:i}),Object(h.jsx)(Oe,{countText:H,extraClasses:W}),z&&Object(h.jsxs)("div",{className:"products__filters",children:[Object(h.jsx)(ve,{id:le.features,description:"Sort by",options:U}),Object(h.jsx)(ve,{id:le.pages,description:"Items on page",options:Y})]}),Q&&Object(h.jsx)(xe,{products:b}),V&&Object(h.jsx)(Ne,{onPageChange:function(e){M.set(je,e.toString()),I(M)},perPage:l,currentPage:D,total:x})]})]})]})},ye=function(){return Object(h.jsx)(Ce,{categoryType:_.phone})},ke=function(){return Object(h.jsx)(Ce,{categoryType:_.tablet})},we=function(){return Object(h.jsx)(Ce,{categoryType:_.accessories})},Pe=function(){var e,t=Y("favorites"),c=Object(o.a)(t,1)[0],s=Object(a.d)(),n=null===(e=Object(o.a)(s,1)[0].get(de))||void 0===e?void 0:e.toLowerCase(),i=Object(r.useState)(c()),l=Object(o.a)(i,2),u=l[0],d=l[1],j=Object(r.useState)(u.length),b=Object(o.a)(j,2),m=b[0],p=b[1],O=n?"result":"item",x="".concat(m," ").concat(O).concat(1===m?"":"s"),v=N()("favorites__count",{"favorites__count--query":n});return Object(r.useEffect)((function(){var e;e=n?c().filter((function(e){return e.name.toLowerCase().includes(n)})):c(),d(e),p(e.length)}),[n,m]),Object(h.jsxs)(V.Provider,{value:{increment:function(){return p((function(e){return e+1}))},decrement:function(){return p((function(e){return e-1}))}},children:[Object(h.jsx)(T,{hasSearch:!0,currentPage:"favourites",favoritesCount:m}),Object(h.jsx)("main",{className:"favorites",children:m?Object(h.jsxs)(h.Fragment,{children:[!n&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(he,{path:[{text:"Favourites"}]}),Object(h.jsx)(B,{extraClassName:"favorites__title",children:"Favourites"})]}),Object(h.jsx)(Oe,{countText:x,extraClasses:v}),Object(h.jsx)(xe,{products:u})]}):Object(h.jsx)("div",{className:"favorites__no-search",children:n?Object(h.jsx)(pe,{}):Object(h.jsx)(_e,{categoryName:"Favorites"})})})]})},Se=function(e){var t=e.extraClass,c=N()("back",t),a=Object(i.o)();return Object(h.jsxs)("button",{className:c,type:"button",onClick:function(){return a(-1)},"data-cy":"backButton",children:[Object(h.jsx)("img",{className:"back__image",src:"img/arrows/arrow-left.svg",alt:"Arrow left"}),Object(h.jsx)("p",{className:"back__text",children:"Back"})]})},Ee=function(e){var t=e.productInCart,c=t.product,a=t.quantity,s=e.onRemoveClick,n=e.onQuantityClick,r=c.imageUrl,o=c.name,i=c.discountedPrice,l=c.id,u="$".concat(+(i*a).toFixed(2));return Object(h.jsxs)("li",{className:"cart-item",children:[Object(h.jsx)("button",{type:"button",className:"cart-item__remove-button","data-cy":"cartDeleteButton",onClick:function(){return s(l)},children:Object(h.jsx)("img",{className:"cart-item__remove-icon",src:"img/cart/close.svg",alt:"Delete item"})}),Object(h.jsx)("img",{className:"cart-item__product-image",src:r,alt:"Product"}),Object(h.jsx)("p",{className:"cart-item__product-name",children:o}),Object(h.jsx)("button",{className:"cart-item__minus",type:"button",disabled:1===a,onClick:function(){return n(l,!0)},children:"-"}),Object(h.jsx)("div",{"data-cy":"productQauntity",className:"cart-item__quantity",children:a}),Object(h.jsx)("button",{className:"cart-item__plus",type:"button",onClick:function(){return n(l,!1)},children:"+"}),Object(h.jsx)("span",{className:"cart-item__total-price",children:u})]})},Fe=function(e){var t=e.productsInCart,c=e.onRemoveClick,a=e.onQuantityClick;return Object(h.jsx)("ul",{className:"cart-items",children:t.map((function(e){var t=e.product.id;return Object(h.jsx)(Ee,{productInCart:e,onRemoveClick:c,onQuantityClick:a},t)}))})},Te=function(){var e=Y(K),t=Object(o.a)(e,5),c=t[0],a=t[1],s=t[3],n=t[4],i=Object(r.useState)(!1),l=Object(o.a)(i,2),u=l[0],d=l[1],j=c(),b=N()("button","button--big",{"button--clicked":u}),m=N()("button__text",{"button__text--clicked":u}),p=j.reduce((function(e,t){var c=t.quantity;return e+t.product.discountedPrice*c}),0),O="$".concat(+p.toFixed(2)),x="Total for ".concat(n," item").concat(1===n?"":"s"),v=0===s;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(T,{hasSearch:!1,hasNav:!1,hasFavorites:!1,cartCount:n}),Object(h.jsxs)("main",{className:"cart",children:[Object(h.jsx)(Se,{extraClass:"cart__back"}),v?Object(h.jsx)(B,{extraClassName:"cart__title",children:"Your cart is empty"}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(B,{extraClassName:"cart__title",children:"Cart"}),Object(h.jsxs)("div",{className:"cart__content",children:[Object(h.jsx)("div",{className:"cart__items",children:Object(h.jsx)(Fe,{productsInCart:j,onRemoveClick:function(e){a(j.filter((function(t){return t.product.id!==e})))},onQuantityClick:function(e,t){a(j.map((function(c){var a=Object(I.a)({},c),s=c.product,n=c.quantity;return s.id===e&&(t?n>1&&(a.quantity-=1):a.quantity+=1),Object(I.a)({},a)})))}})}),Object(h.jsxs)("div",{className:"cart__summary-wrapper",children:[Object(h.jsxs)("div",{className:"cart__summary",children:[Object(h.jsx)(B,{extraClassName:"cart__total-price",children:O}),Object(h.jsx)("p",{className:"cart__count-text",children:x}),Object(h.jsx)(X,{buttonClasses:b,onClick:function(){d(!0)},textClasses:m,children:"Checkout"})]}),u&&Object(h.jsx)("p",{children:"We are sorry, but this feature is not implemented yet"})]})]})]})]})]})},Be=function(e){var t=e.imageSource,c=e.isSelected,a=e.index,s=e.onClick,n=N()("small-photo",{"small-photo--selected":c});return Object(h.jsx)("button",{type:"button",className:n,onClick:function(){return s(a)},children:Object(h.jsx)("img",{className:"small-photo__picture",src:t,alt:"Small product"})})},Me=function(e){var t=e.children;return Object(h.jsx)("h2",{className:"subtitle",children:t})},Ie=function(){var e,t,c=Object(r.useState)(!1),a=Object(o.a)(c,2),s=a[0],n=a[1],j=Object(r.useState)(null),b=Object(o.a)(j,2),m=b[0],p=b[1],O=Object(r.useState)(null),x=Object(o.a)(O,2),v=x[0],f=x[1],g=Object(r.useState)(0),C=Object(o.a)(g,2),y=C[0],k=C[1],w=Object(i.q)().productId,P=(null===m||void 0===m?void 0:m.type)||_.all,F=[{name:"Screen",value:E((null===m||void 0===m?void 0:m.screen)||"")},{name:"Resolution",value:(null===v||void 0===v?void 0:v.display.screenResolution)||""},{name:"Processor",value:(null===v||void 0===v?void 0:v.hardware.cpu)||""},{name:"RAM",value:S((null===m||void 0===m?void 0:m.ram)||"")}],M=[].concat(F,[{name:"Built in memory",value:S((null===v||void 0===v?void 0:v.storage.flash)||"")},{name:"Camera",value:(null===v||void 0===v?void 0:v.camera.primary)||""},{name:"Cell",value:(null===v||void 0===v?void 0:v.connectivity.cell)||""}]),I="$".concat(null===m||void 0===m?void 0:m.discountedPrice);switch(P){case _.phone:e="Phones",t=l;break;case _.tablet:e="Tablets",t=u;break;case _.accessories:e="Accessories",t=d;break;default:e="",t=""}var A="ID: ".concat(function(e){switch(e){case"motorola-atrix-4g":return 802390;case"samsung-gem":return 802391;case"dell-venue":return 802392;case"nexus-s":return 802393;case"lg-axis":return 802394;case"samsung-showcase-a-galaxy-s-phone":return 802395;case"droid-2-global-by-motorola":return 802396;case"droid-pro-by-motorola":return 802397;case"motorola-bravo-with-motoblur":return 802398;case"motorola-defy-with-motoblur":case"t-mobile-mytouch-4g":return 802399;case"samsung-mesmerize-a-galaxy-s-phone":return 802400;case"sanyo-zio":return 802401;case"samsung-transform":return 802402;case"t-mobile-g2":return 802403;case"motorola-charm-with-motoblur":return 802404;case"motorola-xoom-with-wi-fi":return 802405;case"motorola-xoom":return 802406;case"dell-streak-7":return 802407;case"samsung-galaxy-tab":return 802408;default:return 0}}(null===m||void 0===m?void 0:m.id)),L=[{text:e,link:t},{text:(null===m||void 0===m?void 0:m.name)||""}],R=N()("product-details__specs","product-details__specs--up"),D=N()("product-details__specs","product-details__specs--down"),Q=function(e){return k(e)};return Object(r.useEffect)((function(){return q().then((function(e){p(e.find((function(e){return e.id===w}))||null)})),function(e){if(!e)throw new Error("Product not found");var t="https://mate-academy.github.io/react_phone-catalog/api/products/".concat(e,".json");return fetch(t).then((function(e){return e.json()}))}(w).then(f).catch((function(){return n(!0)})),function(){return Q(0)}}),[w]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(T,{activeLink:P,hasSearch:!1}),null!==m&&null!==v?Object(h.jsxs)("main",{className:"product-details",children:[Object(h.jsx)(he,{path:L}),Object(h.jsx)(Se,{extraClass:"product-details__back"}),Object(h.jsx)(B,{extraClassName:"product-details__title",children:m.name}),Object(h.jsxs)("section",{className:"product-details__content-up",children:[Object(h.jsx)("ul",{className:"product-details__small-photos",children:v.images.map((function(e,t){var c=t===y;return Object(h.jsx)("li",{children:Object(h.jsx)(Be,{isSelected:c,imageSource:e,index:t,onClick:Q})},e)}))}),Object(h.jsx)("img",{className:"product-details__big-photo",src:v.images[y],alt:"Selected"}),Object(h.jsxs)("div",{className:"product-details__up-details",children:[Object(h.jsxs)("div",{className:"product-details__prices",children:[Object(h.jsx)(B,{children:I}),!!m.discount&&Object(h.jsx)(W,{children:m.price})]}),Object(h.jsx)("div",{className:"product-details__buttons",children:Object(h.jsx)(Z,{product:m,areBig:!0})}),Object(h.jsx)(ce,{isBig:!1,listClasses:R,specs:F})]}),Object(h.jsx)("p",{className:"product-details__id",children:A})]}),Object(h.jsxs)("section",{className:"product-details__content-down",children:[Object(h.jsxs)("div",{className:"product-details__content-down-left",children:[Object(h.jsx)(Me,{children:"About"}),Object(h.jsx)("article",{className:"product-details__description","data-cy":"productDescription",children:v.description})]}),Object(h.jsxs)("div",{className:"product-details__content-down-right",children:[Object(h.jsx)(Me,{children:"Tech-specs"}),Object(h.jsx)(ce,{isBig:!0,listClasses:D,specs:M})]})]}),Object(h.jsx)(ie,{type:te.random,withoutId:m.id,children:"You may also like"})]}):!s&&Object(h.jsx)(fe,{}),s&&Object(h.jsx)("main",{className:"product-details__not-found",children:Object(h.jsx)(B,{children:"Phone was not found"})})]})},Ae=function(){return Object(h.jsxs)("main",{className:"not-found",children:[Object(h.jsx)(B,{children:"Page not found"}),Object(h.jsx)(a.b,{to:"/",children:"Go to home"})]})},Le=function(){var e=Object(r.useContext)(O).collapseMenu;return Object(h.jsxs)("div",{className:"bottom-navigation",children:[Object(h.jsx)("a",{className:"bottom-navigation__link",href:"https://github.com/AmadeuszAndroid/react_phone-catalog/tree/develop",children:"Github"}),Object(h.jsx)("a",{className:"bottom-navigation__link",href:"#/",onClick:e,children:"Contacts"}),Object(h.jsx)("a",{className:"bottom-navigation__link",href:"#/",onClick:e,children:"rights"})]})};function qe(e,t){return window.location.hash.includes(t)?e:-1}var Re=function(){var e=Object(r.useState)(_.all),t=Object(o.a)(e,2),c=t[0],a=t[1],s=Object(r.useContext)(O).collapseMenu,n=Y(K),l=Object(o.a)(n,5)[4],u=Y(H),d=Object(o.a)(u,4)[3],m=Object(i.q)().productId,p=qe(l,b),x=qe(d,j);return Object(r.useEffect)((function(){q().then((function(e){var t=e.find((function(e){return e.id===m}));t&&a(t.type)}))}),[]),Object(h.jsx)("div",{className:"drop-down-menu",children:Object(h.jsxs)("div",{className:"drop-down-menu__content",children:[Object(h.jsx)("button",{onClick:s,type:"button",className:"drop-down-menu__close",children:Object(h.jsx)("img",{src:"img/header/search/close.svg",alt:"Clear search"})}),Object(h.jsx)(C,{}),Object(h.jsx)(y,{activeLink:c}),Object(h.jsx)(f,{count:x}),Object(h.jsx)(v,{count:p}),Object(h.jsx)(Le,{})]})})},De=function(e){var t=e.hasTopNav,c=void 0===t||t,a=function(){return window.scrollTo(1440,0)};return Object(h.jsxs)("footer",{className:"home__footer footer",children:[Object(h.jsxs)("div",{className:"footer__left",children:[Object(h.jsx)(C,{imageExtraClass:"footer__logo logo"}),F()&&Object(h.jsx)(Le,{})]}),c&&Object(h.jsxs)("nav",{className:"footer__top-nav",children:[Object(h.jsx)("button",{className:"footer__top-link-text",type:"button",onClick:a,children:"Back to top"}),Object(h.jsx)($,{direction:D.top,onClick:a})]})]})};De.defaultProps={hasTopNav:!0};var Qe=function(){var e=Object(r.useState)(!1),t=Object(o.a)(e,2),c=t[0],a=t[1],s="".concat(m,"/:productId");return Object(h.jsx)("div",{className:"app",children:Object(h.jsx)(O.Provider,{value:{collapseMenu:function(){return a(!1)},expandMenu:function(){return a(!0)}},children:Object(h.jsxs)(i.c,{children:[Object(h.jsx)(i.a,{path:"/",element:c?Object(h.jsx)(Re,{}):Object(h.jsxs)("div",{className:"app__content",children:[Object(h.jsx)(ue,{}),Object(h.jsx)(De,{})]})}),Object(h.jsx)(i.a,{path:l,element:c?Object(h.jsx)(Re,{}):Object(h.jsxs)("div",{className:"app__content",children:[Object(h.jsx)(ye,{}),Object(h.jsx)(De,{})]})}),Object(h.jsx)(i.a,{path:u,element:c?Object(h.jsx)(Re,{}):Object(h.jsxs)("div",{className:"app__content",children:[Object(h.jsx)(ke,{}),Object(h.jsx)(De,{})]})}),Object(h.jsx)(i.a,{path:d,element:c?Object(h.jsx)(Re,{}):Object(h.jsxs)("div",{className:"app__content",children:[Object(h.jsx)(we,{}),Object(h.jsx)(De,{})]})}),Object(h.jsx)(i.a,{path:j,element:c?Object(h.jsx)(Re,{}):Object(h.jsxs)("div",{className:"app__content",children:[Object(h.jsx)(Pe,{}),Object(h.jsx)(De,{})]})}),Object(h.jsx)(i.a,{path:b,element:c?Object(h.jsx)(Re,{}):Object(h.jsxs)("div",{className:"app__content",children:[Object(h.jsx)(Te,{}),Object(h.jsx)(De,{hasTopNav:!1})]})}),Object(h.jsx)(i.a,{path:s,element:c?Object(h.jsx)(Re,{}):Object(h.jsxs)("div",{className:"app__content",children:[Object(h.jsx)(Ie,{}),Object(h.jsx)(De,{})]})}),Object(h.jsx)(i.a,{path:"/*",element:Object(h.jsx)(Ae,{})})]})})})};n.a.render(Object(h.jsx)(a.a,{children:Object(h.jsx)(r.StrictMode,{children:Object(h.jsx)(Qe,{})})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.59ee0198.chunk.js.map